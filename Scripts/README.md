# Документация для PlayerController

## Основное описание

Скрипт **PlayerController** отвечает за управление персонажем, включая передвижение, прыжки, управление камерой и оружием, а также отладочные функции с помощью Gizmos.

---

## Основные компоненты

### Переменные управления движением

- **moveSpeed** (public float): Определяет скорость передвижения персонажа.
- **gravityModifier** (public float): Коэффициент, модифицирующий силу гравитации.
- **runSpeed** (public float): Скорость бега персонажа при удержании клавиши Shift.
- **jumpPower** (public float): Сила прыжка персонажа.
- **charCon** (public CharacterController): Ссылка на компонент CharacterController для управления движением.
- **canJump** (private bool): Проверяет, находится ли персонаж на земле и может ли прыгнуть.
- **manyJump** (private bool): Позволяет совершать повторный прыжок в воздухе.

### Камера и прицеливание

- **goToMousePosition** (private bool): Перемещаться ли персонажу в направлении мыши.
- **mainCamera** (private Camera): Основная камера сцены, автоматически привязывается в методе Start.
- **airSpeedControll** (public float): Управление скоростью в воздухе.
- **ignoreHeight** (private bool): Игнорировать высоту прицеливания.
- **aimedTransform** (private Transform): Объект, на который персонаж наводится.

### Смена оружия

- **weaponSwitching** (private WeaponSwitching): Ссылка на компонент для управления сменой оружия.

### Gizmos для отладки

- **gizmo\_cameraRay** (private bool): Включить/выключить отрисовку луча камеры.
- **gizmo\_ground** (private bool): Включить/выключить отрисовку земли.
- **gizmo\_target** (private bool): Включить/выключить отрисовку цели.
- **gizmo\_ignoredHeightTarget** (private bool): Включить/выключить отрисовку цели с игнорированием высоты.

---

## Основные методы

### Передвижение

- **HandleMovementInput()**: Отвечает за обработку ввода для перемещения персонажа.

  - Включает бег (удержание **Shift**) и нормализацию вектора движения.
  - Реализована гравитация и прыжки через вспомогательные методы.

- **Gravity()**: Рассчитывает влияние гравитации на персонажа.

  - Если персонаж на земле, сбрасывает высоту.
  - Если в воздухе, добавляет гравитацию.

- **Jump()**: Обрабатывает прыжки персонажа.

  - Одинарный прыжок доступен при нахождении на земле.
  - Повторный прыжок доступен при нахождении в воздухе.

### Камера и прицеливание

- **HandleRotationInput()**: Управляет вращением персонажа по направлению к мыши.

  - Использует **Physics.Raycast** для определения позиции мыши на поверхности.

- **GetMousePosition()**: Возвращает позицию мыши на поверхности с учетом слоя **whatIsGround**.

- **Aim()**: Обеспечивает прицеливание на основе положения мыши, с опцией игнорирования высоты.

### Полет (TODO)

- **Fly()**: Увеличивает контроль скорости в воздухе. На текущий момент требует доработки.

### Отладка (Gizmos)

- **OnDrawGizmos()**: Отображает различные Gizmos для визуализации.

  - Отображение луча камеры, положения цели и других элементов для удобства разработки.

- **GizmoSettings()**: Позволяет включать/выключать отладочные Gizmos через клавиши **1-4**.

---

## Управление

### Движение

- **W/S**: Вперед/назад.
- **A/D**: Влево/вправо.
- **Shift**: Ускорение (бег).
- **Space**: Прыжок. Поддерживается двойной прыжок.

### Камера

- **Мышь**: Прицеливание по направлению указателя мыши (если активен **goToMousePosition**).

### Отладка Gizmos

- **1**: Переключение отрисовки луча камеры.
- **2**: Переключение отрисовки земли.
- **3**: Переключение отрисовки цели.
- **4**: Переключение отрисовки цели с игнорированием высоты.

---

## Возможные улучшения

1. Реализовать машину состояний для метода **Fly()**.
